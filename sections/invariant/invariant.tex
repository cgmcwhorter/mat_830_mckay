% !TEX root = ../../mat830_mckay.tex
\newpage
\section{Invariant Theory}
\subsection{A Motivating Example}
We now make a transition from groups and graphs to Commutative Algebra and Algebraic Geometry. We begin with a motivating example. 


\begin{ex} \label{ex:mot}
Consider $C_2 \subseteq \SL_2(\C)$, with generator $\two{-1}{0}{0}{-1}$. Then $C_2$ acts on $\C^2$ by $\sigma(p)= -p$, i.e. $\sigma$ is a rotation of $\text{Arg }p$ by $\pi$. The quotient space of this group action has for points the orbit of the action: for every nonzero point $\{p,-p\}$, along with $\{0\}$. A fundamental domain for this action, i.e. a subset of $\C^2$ containing exactly one point from each orbit. 

% axes with origin dotted and positive half of x-axis and same for positive y-axis, upper half plane and dark x-axis. arrow then get a cone. 

More precisely, let $\cC$ denote a cone. We can define a continuous surjective map $\pi: \C^2 \to \cC$ such that the fibers of $\pi$ are precisely the orbits of the action. Choose coordinates so that the cone is defined by $y^2=xz$, then $\pi(u,v)= (u^2,uv,v^2)$ is such a map. To be more systematic, instead consider the ring of polynomials $\C[u,v]$, thought of as the set of polynomials on $\C^2$. [The function $u$ picks out the first coordinate of a point $p \in \C^2$ and so forth.] 

The polynomial functions on the quotient space $\C^2/C_2$ are exactly the polynomials on $\C^2$ that are constant on orbits; that is, the polynomial functions are the set $\{f \in \C[u,v] \colon f(p)=f(-p) \text{ for all } p \in \C^2\}=\C[u^2.uv,v^2] \subseteq \C[u,v]$, note $\C[u^2,uv,v^2] \cong \C[x,y,z]/(y^2-xz)$. Note that the ring $R:= \C[u^2,uv,v^2]$ is an integral domain of dimension two, graded, integrally closed, Cohen-Maccaulay (in fact gorenstein), reflexive, and the polynomial ring $\C[u,v]$ is a finitely generated module over it. In fact, $\C[u,v] \cong R \oplus (Ru + Rv)$. Finally, every indecomposable reflexive $R$-module appears as a direct summand of the polynomial ring $\C[u,v]$. \xqed
\end{ex}

The question we shall explore is how many properties of the ring $R$ in Example~\ref{ex:mot} are specific to this example, and how many are properties hold more generally. 



% -------------------------
% Classical Invariant Theory
% -------------------------
\subsection{Classical Invariant Theory of Finite Groups}

Invariant Theory has connections to many fields, including tori and Lie groups. However, we shall only consider finite groups, so these shall not make an appearance. For this material, we follow Kraft-Procesi. In particular, we take a coordinate free approach whenever possible. Now let $k$ be an infinite field and $W$ a finite dimensional vector space. We say that a function $f: W \to k$ is regular if it is a polynomial in the elements of some basis of $W$---this is independent of basis. Let $k[W]$ be the ring of regular functions on $W$. If $\{x_1,\ldots,x_n\}$ were a basis for $W^*=\Hom(W,k)$, then $k[W] \cong k[x_1,\ldots,x_n]$ is a polynomial ring. This holds because the field is infinite, and this is not true for finite fields (the obstruction is nonzero vanishing functions). 


\begin{dfn}[Homogenous Function]
A regular function $f \in k[W]$ is homogeneous of degree $d$ if $f(\lambda w)=\lambda^d w$ for all $\lambda \in k$ and $w \in W$.
\end{dfn}

Concretely in terms of a basis for $W^*$, this means that $f$ is a linear combination of monomials of degree $d$, i.e. $x_1^{d_1} \cdots x_n^{d_n}$ with $d_1+\cdots+d_n=d$. Since every polynomial is a sum of such monomials, every polynomial is a sum of homogeneous polynomials; that is, $f \in k[W]$ is uniquely a sum of homogeneous polynomials, so $k[W] \cong \bigoplus_{d \geq 0} k[W]_d$, where $k[W]_d=$ homogeneous regular functions of degree $d$. In particular, $k[W]$ is a graded ring, i.e. $A= \bigoplus A_i$ as abelian groups such that $A_iA_j \subseteq A_{i+j}$. As a final remark, we know that $k[W] \cong k[x_1,\ldots,x_n]$. Fixing a basis $\{e_1,\ldots,e_n\}$ for $W$, then $x_1,\ldots,x_n$ is a dual basis for $W^*$, i.e. $x_i(e_j)= \delta_{ij}$. 


Now suppose we have a subgroup $G \subseteq \GL(W)$, or more generally a representation $\rho: G \to \GL(W)$. This gives an action of $G$ on $W$: $gw:=\rho(g)w$. In turn, this gives an action of $G$ on $k[W]$, $(gf)(w):=f(g^{-1}w)$ (the $(-1)$-power is needed to get a left action). Moreover, this action is compatible (in fact the same as) the action of $G$ on the dual space $W^*$. Keep in mind that $k[W]_1$ is the set of linear maps from $W \to k$, i.e. $W^*$. In fact, $k[W]_d= \sym_d(W^*)$, the d\tss{th} symmetric power of $W^*$, as such it inherits the action of $G$ on $W^*$. 


\begin{dfn}[Invariant Function]
A function $f \in k[W]$ is invariant ($G$-invariant) if $gf=f$ for all $g \in G$. Equivalently, $f(w)=f(gw)$ for all $g^{-1} \in G$, i.e. $g \in G$. We write $k[W]^G$ for the set $\{ f \in k[W] \colon f \text{ invariant}\}$.
\end{dfn}


One can check that $k[W]^G$ is a ring: each $g \in G$ acts as an automorphism of $k[W]$. 


\begin{ex}
Let $S_n$ be the symmetric group on $n$ letters. Now $S_n$ has an action on $W=k^n$ via $\sigma(e_i)=e_{\sigma(i)}$. Equivalently, $\sigma(a_1,\ldots,a_n)=(a_{\sigma^{-1}(1)}, \ldots, a_{\sigma^{-1}(n)})$. Then $S_n$ also acts on $k[W] \cong k[x_1,\ldots,x_n]$, where $\{x_i\}_{i=1}^n$ is the dual basis. What is $\sigma(x_i)$? We know $x_i(e_j)=\delta_{ij}$, so 
	\[
	(\sigma x_i)(e_j)=x_i(\sigma^{-1}(e_j))=x_ie_{\sigma^{-1}(j)}=\delta_{i \sigma^{-1}(j)}.
	\] 
But this means $(\sigma x_i)(e_j)=\delta_{i \sigma^{-1}(j)}=1$ if and only if $\sigma^{-1}(j)=i$ if and only if $\sigma(i)=j$. Therefore, $\sigma x_i= x_{\sigma(i)}$. Generally for any $f \in k[x_1,\ldots,x_n]$, $(\sigma f)(x_1,\ldots,x_n)= f(x_{\sigma(1)},\ldots,x_{\sigma(n)})$. Now the question is which functions are invariant; that is, which functions of $k[x_1,\ldots,x_n]$ are independent of the order of the $x_i$? These are the symmetric polynomials, e.g. $x_1+\cdots+x_n$, $x_1\cdots x_n$, $x_1^7+\cdots+x_n^7$. \xqed
\end{ex}


The symmetric polynomials in $n$ variables are all composed of the elementary symmetric polynomials, given as follows:
	\[
	\begin{split}
	s_0(x_1,\ldots,x_n)&:= 1 \\
	s_1(x_1,\ldots,x_n)&:= \sum_{1 \leq i \leq n} x_i=  x_1 + \cdots + x_n \\
	s_2(x_1,\ldots,x_n)&:= \sum_{1 \leq i<j \leq n} x_i x_j \\
	s_3(x_1,\ldots,x_n)&:= \sum_{1 \leq i<j<k \leq n} x_i x_j x_k \\
	&\;\;\;\vdots \\
	s_n(x_1,\ldots,x_n)&:= x_1\cdots x_n
	\end{split}
	\]


\begin{thm}[Fundamental Theorem of Symmetric Functions/Newton's Theorem] \label{thm:fundone}
Any symmetric polynomial in $x_1,\ldots,x_n$ is uniquely expressible as a linear combination of elementary symmetric polynomials. 
\end{thm}


In particular, the $s_i$'s are algebraically independent of each other, i.e. there are no nontrivial polynomial relations among them. Therefore, it must be that $k[x_1,\ldots,x_n]^{S_n}= k[s_1,\ldots,s_n]$. This is indeed a polynomial ring since the $s_i$ have no relations between them. There are algorithms to write any symmetric polynomial in the elementary symmetric polynomials. 


\begin{ex} \hfill
        \begin{enumerate}[(i)]
        \item $x^2+y^2=(x+y)^2-2xy= s_1^2-2s_2$
        \item $x_1^3+x_2^3+x_3^3= s_1^3-3s_1s_2+3s_3$
        \item $x_1^2x_2+x_1^2x_3+x_2^2x_1+x_2^2x_3+x_3^2x_1+x_3^2x_2= s_1s_2 - 3s_3$
        \end{enumerate} \xqed
\end{ex}


\begin{rem}
The power sums, $p_1(x_1,\ldots,x_n)=x_1+\cdots+x_n$, $p_2(x_1,\ldots,x_n)=x_1^2+\cdots+x_n^2$, $\ldots$, $p_n(x_1,\ldots,x_n)=x_1^n+\cdots+x_n^n$, also generate the ring of symmetric polynomials. The complete symmetric polynomials, the Schur polynomials, etc. all also generate the ring of symmetric polynomials. Hence, there are procedures from going from one set of these polynomials to another. The transition functions between them are crucial in the representation of $S_n$ and $\GL_n$ (Schur-Weyl Theory). 
\end{rem}

































As another aside, the discriminant of $S_n$ acting on $x_1,\ldots,x_n$ is\footnote{To some, this is the square of what they would define as the discriminant.}
	\[
	\Delta= \prod_{i<j} (x_i - x_j)^2
	\]
The discriminant is symmetric, so it must be a polynomial in $s_1,\ldots,s_n$. 


\begin{ex}
If $n=2$, then $\Delta=(x-y)^2=x^2-2xy+y^2= s_1^2- 4s_2$. If $n=3$, $\Delta=(x - y)^2(x-z)^2(y-z)^2= s_1^2s_2^2- 4s_2^3 - 4s_1^3s_3 - 27 s_3^2+ 18s_1s_2s_3$. 
\end{ex}

Given a polynomial $g(t) \in \C[t]$ with roots $a_1,\ldots,a_n$ (with multiplicity), the discriminant of $g$ is
	\[
	\Delta(g)= \Delta(a_1,\ldots,a_n)= \prod_{i<j} (a_i-a_j)^2
	\]

Observe $\Delta(g)=0$ if and only if $g$ has a repeated root. For example, $g(t)=t^2+bt+c$, then $\Delta(g)= b^2-4c$. An exercise for the reader is to show $\Delta(g)= (\det V)^2$, where $V$ is the Vandermonde matrix:
	\[
	V=
	\begin{pmatrix}
	1 & a_1 & a_1^2 & \cdots & a_1^{n-1} \\
	1 & a_2 & a_2^2 & \cdots & a_2^{n-1} \\
	\vdots & \vdots & & \ddots & \vdots \\
	1 & a_n & a_n^2 & \cdots & a_n^{n-1}
	\end{pmatrix}
	\]




\subsection{Restricting the Action of $S_n$}

We want to restrict the action of $S_n$ on $k[x_1,\ldots,x_n]$ to the subgroup $A_n \subseteq S_n$. All the symmetric functions are still invariant. Is anything else invariant? Notice that $(i\;j)\sqrt{\Delta}= - \sqrt{\Delta}$. So if $\sigma$ is an even permutation, $\sigma(\sqrt{\Delta})= \sqrt{\Delta}$.

FACT: $k[x_1,\ldots,x_n]^{A_n}= k[s_1,\ldots,s_n,\sqrt{\Delta}]$.


Indeed, we can think of $k[x_1,\ldots,x_n]^{A_n}$ as consisting of the symmetric polynomials and the sign-symmetric polynomials: $f(x_{\sigma(1)},\ldots,x_{\sigma(n)})= (-1)^{\sgn(\sigma)} f(x_1,\ldots,x_n)$. 


Moreover, $\Delta= (\sqrt{\Delta})^2$ is a polynomial in the `variables' $s_1,\ldots,s_n$. But then $k[x_1,\ldots,x_n]^{A_n}$ is isomorphic to a hypersurface ring: $k[y_1,\ldots,y_n,z]/(z^2-f(y_1,\ldots,y_n))$. 




First, a few basic questions about $k[W]^G$:

1. (Generators and Relations): Given a finite group $G \subseteq \GL(W)$, is the ring of invariants $k[W]^G$ a finitely generated $k$-algebra? 

2. If so, describe them explicitly and also is the ideal of relations among the generators finitely generated?If so, describe them explicitly.

Following theorem due to Hilbert and Noether:

\begin{thm}[First Fundamental Theorem of Invariant Theory for Finite Groups]
Let $k=\C$. The invariant ring $\C[W]^G$ is generated as a $\C$-algebra by at most $\binom{|G|+\dim W}{\dim W}$ homogeneous polynomials of degree at most $|G|$. 
\end{thm}


Note $\binom{n+d}{d}$ is the vector space dimension of homogenous polynomials of degree $d$ in $n$ variables. Hilbert proved finiteness as an application of the Hilbert-Basis Theorem [1890]. The proof given was  nonconstructive. There is a story that Gordan (rep. theory of binary forms, was constructive), is said to have a said thats not math thats theology. Mostly believed to be a story. Hilbert later gave a constructive proof. [1890s]. Noether gave the bound in the theorem which is tight, by showing $k[W]^G$ is generated by
	\[
	\left\{\dfrac{1}{|G|} \sum_{g \in G } gm \colon m \text{ runs over monomials of degree } \leq |G| \right\}
	\]


Sketch of Hilbert's (nonconstructive proof)

\begin{thm}[Hilbert Basis Theorem]
The polynomial ring $k[x_1,\ldots,x_n]$ is noetherian, i.e. every ideal of $k[x_1,\ldots,x_n]$ is finitely generated, where $k$ is a field.
\end{thm}

Let $S=k[x_1,\ldots,x_n]$, $R=k[x_1,\ldots,x_n]^G \subseteq S$. Let $I$ be the ideal of $R$ generated by all invariants of positive degree. 

Exercise: If $I$ is a finitely generated ideal of $R=k[f_1,\ldots,f_t]$, say $I=Rf_1+\cdots+Rf_t$, then $\{f_i\}$ generate the ring of invariants as a $k$-algebra. The proof follows by induction on the degree. 


We know that $IS$ is a finitely generated ideal of $S$ by the Hilbert Basis Theorem. Define the Reynold's operator 
	\[
	\begin{split}
	\rho&: S \to R \\
	f&\mapsto \dfrac{1}{|G|} \sum_{g \in G} gf.
	\end{split}
	\]
Observe that 

1. $\rho(S) \subseteq R$. We have seen this before in a different form.
2. $\rho$ fixes $R$ elementwise. 
3. $\rho$ is a ring homomorphism, and is $R$-linear: if $h \in S^G$, $f \in S$, then $\rho(hf)=h \rho(f)$
4. For any ideal $J$ of $R$, $JS=\{ \sum as \colon a \in J, s \in S\}$. So $\rho(JS)=\{ \rho(\sum as) \colon a \in J, s \in S\}= \{ \sum \rho(as) \colon a \in J, s \in S\}= \{ \sum \rho(s)a \colon a \in J, s \in S\}= \{ \sum ra \colon r \in R, a \in J\}= J$. But then $\rho(JS)=J$. (3rd $=$ sign follows from 3) and last from $\rho$ maps $S$ onto $R$. 


Then the ideal $I$ generated by the invariants of positive degree is the same as $\rho(IS)$, and $IS$ is finitely generated so $I$ is as well. 


% Chekov gun quote

\begin{thm}[The Second Fundamental Theorem of Invariant Theory for Finite Groups]
The invariant ring is finitely generated. [Hilbert's Syzygy Theorem]
\end{thm}


There are versions of the 1st and 2nd Fundamental Theorem of Invariant Theory for many classes of groups.






% LAST TIME $k[x_1,\ldots,x_n]^{S_n}= k[s_1,\ldots,s_n]$, $k[x_1,\ldots,x_n]^{A_n}= k[s_1,\ldots,s_n,\sqrt{\Delta}]$
% Hilbert-Noether: k[W]^G is a finitely generated $k$-algebra if (big if) $|G| \neq 0$ in $k$. We needed the Reynolds operator $\rho(f)= \dfrac{1}{|G|} \sum_{g \in G} gf$. 

% Proof above works for \char k \nmid |G|, not just \C. 


Hilbert's 14\tss{th} Problem (1900): $k[W]^G$ is \emph{always} a finitely generated $k$-algebra, for any group $G$. Nagata gave the first counterexample in 1958. 

% Give nagata example

A second problem is when is $k[W]^G$ a polynomial ring? More generally, does $k[W]$ always contain a polynomial ring over which it is a finitely generated module? Examples $k[W]^{S_n}$, $k[W]^{A_n}$, respectively. Completely solved by Chevalley and Shephard-Todd. Answer yes, as long as $\char k \nmid |G|$. The key ideas are Noether normalization, which we shall address later. 



\begin{dfn}[Reflection]
An element $1 \neq g \in \GL(W)$ is a (true) reflection if fixes a hyperplane, i.e. a codimension one hyperspace, and satisfies $g^2=1$. Equivalently, $g$ is conjugate to a diagonal matrix $(1,1,\ldots,1,-1)$. A pseudo-reflection if it fixes a hyperplane and has finite order. Equivalently if $k$ is algebraically closed, then $g$ is conjugate to a diagonal matrix $1,1,\ldots,1,\omega$, where $\omega$ is some n\tss{th} root of unity. 
\end{dfn}


\begin{dfn}
Let $G \subseteq \GL(W)$ be finite. Let $G''$ be the subgroup generated by reflections. $G'$ be the subgroup generated by pseudo-reflections. Then $G'' \subseteq G' \subseteq G$. 
\end{dfn}


Note: Both are normal in $G$, since a conjugate of a (psuedo-) reflection 


\begin{dfn}[Reflection Group]
We say $G$ reflection group if $G''=G$, i.e. $G$ is generated by reflections. $G$ pseudo-reflection group (or sometimes complex reflection group) if $G'=G$, i.e. $G$ is generated by pseudo-reflections. 
\end{dfn}


\begin{ex} \hfill
\begin{enumerate}[(i)]
\item $S_n$ acting on $k[x_1,\ldots,x_n]$ is generated by reflections: $(i\;j)$ fixes the subspace $\langle x_3, -- , x_n,x_1+x_2 \rangle$, etc.. 
\item $S_n$ acting on the subspace $W \subseteq k^n$ defined by $x_1+\cdots+x_n=0$ (standard representation). This is also a reflection group (ltr). 
\end{enumerate}
\end{ex}


\begin{thm}[Chevalley, Shepherd-Todd] \label{thm:sheptod}
Let $G \subseteq \GL(W)$ be a finite group. Then $k[W]^G$ is a polynomial ring, i.e. is generated over $k$ by algebraically independent elements if and only if $G$ is a pseudo-reflection group. 
\end{thm}


% Suppose $G \subseteq \GL(W)$ is finite. By Cayley's Theorem, $G \hra S_n$. SO $k[W]^G \supseteq k[W]^{S_n}$. Galois Theory probably implies that module finite extension. WHy does not work? No action on $\GL(W)$ for $S_n$, least not one clear. Even if one, why act by pseudo-reflections? So this does not replace Noether Normalization. 


At the other end of the spectrum, say $G$ is small if it contains no pseudo-reflections. 


First, if $G \subseteq \SL(W)$, then any $g \in G$ has $\det g=1$, so $G$ must be small. 

Second, can always reduce to the small case in studying $k[W]^G$. Let $G' \subseteq G$ be the subspace generated by pseudo-reflections. Then $k[W]^G \subseteq k[W]^{G'}$. The right side is a polynomial ring by Theorem~\ref{thm:sheptod}. In fact, $k[W]^G \cong (k[W]^{G'})^{G/G'}$, on right $G$ acts as identity on $k[W]^{G'}$ and the quotient kills it so should be the same. 







Back to examples. Aiming to understand binary polyhedral groups. Recall in the example of $A_n$, we looked at the `sign-symmetric' polynomials, i.e. $\{ f \in k[W] \colon \sigma f= (-1)^{\sgn(\sigma)} f \}$. This is a special case of relative invariants. 

\begin{dfn}
Suppose there is a function $\chi: G \to k^\times$ so that $gf= \chi(g)f$ for all $g \in G$. Say that $f$ is a relative invariant for $\chi$. We say that $f$ is a relative invariant for $\chi$.
\end{dfn}

Notice that $\chi$ is a homomorphism of groups. In other words, $\chi$ is a 1-dimensional representation of $G$, also known in this context as a linear character. Let $k[W]^G_\chi$ be the set of all such things, i.e. $\{ f \in k[W] \colon f \text{ relative invariant for }\chi\}$. In particular, $k[W]^G_{\text{triv}}= \{ f \in k[W] \colon gf=\text{triv}(g)f \text{ for all g}\}=k[W]^G$. 

Observe that $k[W]^G_\chi$ is a module over $k[W]^G$. So if $f$ is an invariant, $h$ relative invariant, then for any $g \in G$
	\[
	g(fh)= g(f)g(h) = f \chi(g) h = \chi(g) fh.
	\]


\begin{ex} \hfill
\begin{enumerate}[(i)]
\item $C_n \subseteq \GL_2(k)$, generated by $\sigma= \two{\omega_n}{}{}{\omega_n}$. Then $C_n$ acts on $k[x,y]$ by $\sigma(x)= \omega x$, $\sigma(y)= \omega y$, $\omega=\omega_n$, $\sigma(x^ay^b)= \omega^{a+b} x^ay^b$. So $x^ay^b \in k[x,y]^{C_n}$ if and only if $a+b \equiv 0 \mod n$. Every invariant polynomial is a sum of invariant monomials since each monomial is taken to a scalar multiple of itself. So $k[x,y]^{C_n}= k[\{x^ay^b \colon a+b \equiv 0 \mod n, a,b \geq 0\}]$. In fact, $k[x^n,x^{n-1}y,x^{n-2}y^2,\ldots,xy^{n-1},y^n]$, the n\tss{th} Veronese subring of $k[x,y]^n$. 

Take a character $\chi_j$ of $C_n$, which takes $\sigma$ to $\omega^j$, $0 \leq j< n$. $k[x,y]^{C_n}_{\chi_j}= \{ f \in k[x,y] \colon gf= \chi_j(g)f \}= \{ f \colon \sigma f= \chi_j(\sigma)f \}= \{ f \colon \sigma f= \omega^j f\}$. A monomial $x^ay^b$ is $\chi_j$ relatively invariant if and only if $a+b \equiv j \mod n$. 

If $j=1$: Get $x, y$. Then obtain $k[x,y]$. Oops, not a ring! As a module over $R:= k[x^n,x^{n-1}y,x^{n-2}y^2,\ldots,xy^{n-1},y^n]$ is generated by $x$ and $y$. Contains monomials such as $x,y, x^{n+1}, x^ny, x^{n-1}y^2,\ldots$. 

If $j$ arbitrary, then $k[x,y]^{C_n}_{\chi_j}= R(x^j,x^{j-1}y, \ldots,xy^{j-1},y^j)$, the $R$ span of the monomials given. ``the $k$-span of all monomials of degree $j \mod n$.'' In this case, we get $k[x,y]= \bigoplus_{j=0}^{n-1} \text{$k$-span of monomials deg } j \mod n$, which is $R \oplus I_1 \oplus I_2 \oplus \cdots \oplus I_{n-1}$, where $I_j:= R(x^j,x^{j-1}y, \ldots,xy^{j-1},y^j)$, a direct sum decomposition of $k[x,y]$ as an $R$-module. 


Remark that $R$ is the same as $k[a_1,\ldots,a_{n+1}]/J$, where $J$ is generated by the two-by-two minors 

% matrix, two rows, row 1: a_1 \ldots a_n
% row 2: a_2 a_3 \cdots a_{n+1}

\item $C_n \subseteq \SL_2(k)$, generated by $\sigma = \two{\omega_n}{}{}{\omega_n^{-1}}$. This acts on $k[u,v]$. by $\sigma(u)= \omega u$, $\sigma(v)= \omega^{-1} v$. Suffices to consider only monomials. $\sigma(u^av^b)= \omega^{a-b} u^av^b$. Then $k[u,v]^{C_n}= k[\{u^av^b \colon a-b \equiv 0 \mod n \}= k[u^n,uv,v^n] \cong k[x,y,z]/(xz-y^n)$. 

Do not have to work only with monomials. Another generating set of invariants: $u^n+v^n, uv, u^n-v^n$ (as long as we can divide by 2 in $k$). These three are related by $(u^n+v^n)^2= (u^n-v^n)^2+ 4(uv)^n$. Letting $X^2=Z^2+4Y^n$. Could also replace $Y$ by $\sqrt[n]{\frac{1}{4}Y}$, turning into pure power so that $Z^2= X^2 - Y^n$. 

For a character $\chi_j$ are before, $k[u,v]^{C_n}_{\chi_j}$ is $k$-span of monomials $u^av^b$, such that $a-b \equiv j \mod n$. 


%Specific example: $n=3$, obtain $k[u,v]^{C_3}= k[u^3,uv,v^3]$. $k[u,v]^{C_3}_{\chi_1}= R(u,\cancel{u^2v},\cancel{u^3v^2},v^2)$. (go left to right, see you do not need crossed ones). $k[u,v]_{\chi_2}= R(u^2,v)$. 

\item 
\end{enumerate}
\end{ex}












% Last time k[u,v]^C_n= k[u^n,u^{n-1}v,\ldots,v^n] if C_n= \two{\omega}{}{}{\omega_n} \ranlge$
% k[u,v]^C_n= k[U6n,uv,v^n] if C_n= \langle \two{\omega_n}{}{\omega_n^{-1} \rangle
% in both examples k[uv,] \con \bigoplus_\chi k[u,v]_\chi^G, \xhi runs over linear chars of G=C_n. Spoiler does not always happen.

\begin{ex}
The binary dihedral group $B\bD_4$ of order 16 generated by $C_4= \langle \two{\omega_4}{}{}{\omega_4^{-1}} \rangle = \langle \two{i}{}{}{-i} \rangle=\sigma$ and $A= \two{0}{i}{i}{0}$. The matrix $A$ sends $u$ to $iv$, $v$ to $iu$. The invariants of $C_4$ are generated by $u^4,uv,v^4$. The matrix $A$ sends $u^4$ to $(iv)^4=v^4$. $uv$ to $(iv)(iu)= -uv$, $v^4$ to $u^4$. So in this case monomials not always sent to scalar multiples of themselves. So it is not necessarily the case that a polynomial is invariant iff all its monomials are. But we can see that $u^4+v^4$ is invariant under $C_4$ and $A$, hence is invariant of $B\bD_4$. Ditto for $u^2v^2$ and $uv(u^4-v^4)$. Not too hard to see thats all. So $k[u,v]^{B\bD_4}= k[u^4+v^4,u^2v^2,uv(u^4-v^4)]$, label these $X$, $Y$, $Z$. $Z^2=Y(X^2-4Y^2x^2Y-4Y^3$. Possible to adjust $Y$ so that relation is $Z^2=X^2Y-Y^3$. Therefore, $k[u,v]^{B\bD_4} \cong k[x,y,z]/(z^2-x^2y+y^3)$. 
\end{ex}


More generally, $k[u,v]^{B\bD_n} \cong k[x,y,z]/(z^2-x^2y+y^{n-1})$.


\begin{thm}[Klein, 1884]
For each of the binary polyhedral groups $G$ in $\SL_2(\C)$, the ring of invariants $\C[u,v]^G$ is generated by three fundamental invariants which satisfy a single relation. Therefore, $\C[u,v]^G \cong \C[x,y,z]/(f(x,y,z))$, where
	\begin{table}[htbp]
	\centering
	\begin{tabular}{ccc}
	Name & Group & $f(x,y,z)$ \\
	$(A_{n-1})$ & $C_n$ & $xz-y^n$ or $z^2-x^2-y^n$ \\
	$(D_{n+1})$ & $B\bD_n$ & $z^2-x^2y+y^{N-1}$ \\
	$(E_6)$ & $B\bT$ & $z^2-x^3-y^4$ \\
	$(E_7)$ & $B\bbO$ & $z^2-x^3-xy^3$ \\
	$(E_8)$ & $B\bI$ & $z^2-x^3-y^5$
	\end{tabular}
	\end{table}
The polynomials are called the Kleinian hypersurface singularities.
\end{thm}


\pfsk We sketch the proof in the Platonic solids case $E_6$, $E_7$, $E_8$. Let $G= B \bT, B\cO, B\bI \subseteq \SL_2(\C)$. Then $G$ acts on $\C^2$ so that it acts on the projective line $\cP^1$, identified with the 2-sphere by stereographic projection

% Given stero. stero. projection image.

Given a point $[a\colon b] \in \cP^1$ ($=[\lambda a \colon \lambda b], \lambda \neq 0$). It has an orbit under $G$, say $\cO=\{ [a_1\colon b_1] = [a \colon b], [a_2 \colon b_2], \ldots, [a_t \colon b_t]\}$. The polynomial
	\[
	f(u,v)= \prod_{i=1}^t (b_iu - a_iv) \in \C[u,v]
	\] 
is invariant under the action of $G$ since $G$ simply permutes its factors. Geometrically, $\cO$ is the zero set of $f(u,v)$ in $\cP^1$. Call $\cO$ the divisor of $f$. On the other hand, given a homogeneous polynomial $f(u,v) \in \C[u,v]$, there is a factorization (FTOA)
	\[
	f(u,v)= \prod_{i=1}^t (b_iu-a_iv)
	\]
only unique up to scalar multiples of the factors. So the set of points $\{[a_i \colon b_i]\}$ is well-defined on the projective line. We know (Klein knew) 3 particular orbits
	\[
	\begin{split}
	%%%%%%%%%%%
	\end{split}
	\]
so we get 
	\[
	V(u,v)= \prod_{vertices [a_i,b_i]} (b_iu-a_iv)
	\]
	\[
	E(u,v)= \prod_{edges centers}
	\]
	\[
	F(u,v)= \prod_{face centers}
	\]
Klein knew these \emph{explicitly}. Next, use the group theory and degrees of polynomials to show that $V,E,F$ generate all invariants. Then, use the explicit forms to find the relation. \qed \\

Details for $B\bI$, see Nash ``On Klein's Icosahedral Solution of the Quintic.'' on BB.



\subsection{Deformation Theory}

Another place where the Kleinian singularities appear, this time as the ``simple singularities.'' Roughly speaking, these are the ones that deform into finitely many others. 

This section we work with germs of hypersurface singularities up to right equivalence: these are pairs $(f,O)$, where $f$ is convergent power series in $n$ variables $O$ is the origin in $\cA^n$ and $(f,O) \sim (g,O)$ if there is an automorphism $\phi$ of $\cA^n$ and an open (in Euclidean topology) neighborhood $U$ of $O$ so that $f=g \phi$ on $U$. So we focus on local properties of $f$. 


EG $f(x,y)= xy(x-y)(x-\lambda y)$. for $\lambda \neq 0,1$. Then $f$ defines a (germ of a) plane curve.   We can associate to $f$ the 4 points on $\cP^1$: $0,1,\infty,\lambda$. The cross-ratios of 4 points on $\cP^1$, $z_1,\ldots,z_4$ is 
	\[
	(z_1,z_2; z_3,z_4)= \dfrac{(z_3-z_1)(z_4-z_2)}{(z_3-z_2)(z_4-z_1)}
	\]
An exercise is to show that any automorphism of $\C[x,y]$ takes $f(x,y)$ another product of 4 linear factors, leaving the cross-ratio invariant. So there are infinitely many right equivalence classes of quartic germs. 


\begin{dfn}[Singularity]
$f(x_1,\ldots,f_n)$ has a singular point at $0$ if $f$ vanishes at 0 and so do all partial derivatives $\dfrac{\partial f}{\partial x_i}$ for $i=1,\ldots,n$. 
\end{dfn}


\begin{ex}
 $f(x,y)= x^2+y^n$ has partials $2x$ and $ny^{n-1}$. These both vanish at $(0,0)$ and $f(0,0)=0$ so the origin is a singular points.

$n=2$, $x^2+y^2= (x-iy)(x+iy)$ so the singular points looks like the intersection of two lines. 

% Image of two crossing lines.

$n=3$: $x^2+y^3$

% Give plot

This is a cusp.

$n \geq 4$ ``higher-order cusp''. 

\end{ex}


\begin{ex}
$f(x,y,z)= xy^2+z^2$, $\nabla f=\langle y^2,2xy,2z \rangle$. These all vanish if and only if $y=0=z$ and $x$ arbitrary. So $x$-axis. We say that these are non-isolated singular points. 
\end{ex}


% Recall definition of flat.

\begin{dfn}[Deformation]
A deformation of a germ $(f,O)$ (or of its vanishing set $(V(f),0)$) is a flat morphism $\pi: \fX \to B$, where $B$ has a distinguished point $b \in B$ and $\pi^{-1}(b)$ is isomorphic to $V(f)$.
\end{dfn}

For us, $B$ will always be $\cA^n$. Possible for $\pi^{-1}(b)$ to have singularities. Think of the $\fX$ as a family parametrized by $B$. The flatness assumption has two critical consequences: it forces all the fibers $\pi^{-1}(c)$ to have the same dimension as $c$ runs over $B$ (weird for curve to deform to surface) and ``multiplicity is upper semi-continuous'' in flat families, so the singularities of other fibers are no worse than those with which we started with. 

% Line B. Alove if wavy sheet X, pi arrow from X to B. small tick mark on line labeled b, and above it in plane a looped curve. 


\begin{ex}
Take $f(x,y)= x^2+y^3$. Let $B$ be the affine plane $\cA^2$, with coordinates $u,v$. Let $\fX$ be the subset of $\cA^4$ $\{(x,y,u,v) \colon x^2+y^3+uv+v=0\}$ and define $\pi: \fX \to B$ given by $(x,y,u,v) \mapsto (u,v)$. The fiber over $0 \in B$ is $\{(x,y,u,v) \colon x^2+y^3+uy+v=0, u=v=0\}$. $=\{(x,y,0,0) \colon x^2+y^3=0\}$, clearly isomorphic to $V(f)$. 

The fiber over $(-3,2)$ is the vanishing set of $x^2+y^3-3y+2=0$. if and only if $x^2+(y-1)^2(y+2)=0$. is isomorphic to the vanishing set of $x^2+y^2$.  %y^3?

So this is just the vanishing set consisting of two lines crossing 
\end{ex}









% Last Time: Deformation of germs of (complex) hypersurfaces.

% Classification/Correction: Considering germs up to right equivalence means allowing automorphisms of the ring of convergent (or formal power series), not $\C^n$. e.g. $f(x,y)= x^2+y^2(y-1)^2$. at the origin. In $\C\{x,y\}$ (ring of convergent power series) $y-1$ is invertible. Since it has \neq 0 constant term. So we can make the automorphism of $\C\{x,y\}$, $x \mapsto x$, $y \mapsto y(y-1)$. This turns $f$ into (a unit multiple of) $x'^2+y'^2$. Similarly, can do same thing at $(0,1)$. moving that point to the origin by a linear chance of variables to get $x^2 + (y+1)^2y^2$, then the same trick to get $x'^2+y'^2$. This curve has two singularities: origin and (0,1), which are right equivalent to the $A$, singularity $x^2+y^2=0$. 
% Check two singularities: \langle 2x, 2y(y-1)^2+2y^2(y-1) \rangle$. 





We discussed deformations `geometrically' and also algebraically as introducing new parameters, e.g. $x^2+y^3+uy+v$ is a deformation of $x^2+y^3$ over the base $\cA^2$ with coordinates $u,v$. 


Fact: There is a certain deformation of an isolated (see below) hypersurface singularity from which all others can be obtained, up to right equivalence of germs---called a versal deformation. [Note that versal means there exists, \underline{uni}versal means there exists a unique.] 


The hypersurface $f(x_1,\ldots,x_n)=0$ has an isolated singularity at 0 if 0 is a singular point (all partials vanish) but there is a neighborhood of 0 not containing any other singular points. Equivalently, the ideal of $\C\{x_1,\ldots,x_n\}$ generated by $f,\frac{\partial f}{\partial x},\ldots, \frac{\partial f}{\partial x_n}$, contains a power of the ideal generated by $(x_1,\ldots,x_n)$, i.e. its $m$-primary ideal. 


\begin{thm}
Let $f(x_1,\ldots,x_n) \in \C\{x_1,\ldots,x_n\}$ have an isolated singularity at 0. Let $T^1:= \C\{x_1,\ldots,x_n\}/(f,\frac{\partial f}{\partial x},\ldots, \frac{\partial f}{\partial x_n})$, the Tjurina algebra of $f$, and let $g_1,\ldots,g_m$ be a $\C$-basis for $\C$. Then 
	\[
	f + \sum_{i=1}^m u_i g_i
	\]
defines a versal deformation of $f$ over the base $\cA^m$ with coordinates $u_1,\ldots,u_m$. 
\end{thm}



\begin{ex}
$f(x,y)= x^2+y^3$
$T^1= \C\{x,y\}/(x^2+y^3,2x,3y^2)$. 
Observe 2,3 do nothing as invertible, so
$T^1= \C\{x,y\}/(x^2+y^3,x,y^2)$. 
Killed $x$ so may as well not include
$\C\{y\}/(y^3,y^2)$. 
Killed $y^2$ so no need to kill $y^3$, that's just mean
$\C\{y\}/(y^2)$. 
A basis is $\{1,y\}$. 
So $f+ u_1 1 + u_2 y$ is a versal deformation of $f$. It's isomorphic to $x^2+y^3+uy+v$, which is an example we saw presviously. 
% Give plot of $f$
\end{ex}


\begin{ex} %Non-example. Singlular point at origin but whole x-axis singular. 
$f(x,y)= xy^2$, $y$ axis and two $x$-axes. 
$T^1= \C\{x,y\}/(xy^2,y^2,2xy)=\C\{x,y\}/(xy^2,y^2,xy)=\C\{x,y\}/(y^2,xy)$. 
A basis as a $\C$ vector space is $\{1, y, x, x^2, \ldots\}$. 
But this is not finite as $f$ does not define an isolated singularity. 
\end{ex}


\begin{ex}
$f(x,y)= x^4+y^4$.
$T^1= \C\{x,y\}/(x^4+y^4, x^3,y^3\}= \C\{x,y\}/(x^3,y^3)$. 

% Pascal triangle 
% 			1
% 		x             y
%     x^2			xy 		y^2
% x^3	x^2y		xy^2			y^3
% cross off everything excelt x^2y,xy^2, x^2y^2, and top three rows. 
A versal defomration is $x^4+y^4+u_11+u_2x+u_3y+\cdots+u_{9}x^2y^2$
In particular, there is a deformation of $x^4+y^4$ given by $x^4+y^4+\lambda x^2y^2$. 
This is right equivalent to $xy(x-y)(x-\mu y)$ which are non-equivalent for distinct values of $\mu$. So $x^4+y^4$ deforms to infinitely many equivalence classes of singularities. 
\end{ex}


\begin{ex}
$f(x,y,z)= x^2+y^2+z^2$, the cone.

% Give picture

$T^1= \C\{x,y,z\}/(x^2+y^2+z^2, x,y,z)= \C$. 
So the versal deformation is $x^2+y^2+z^2+u$. 

% Horizontal line (far left label $\A^1$, tick in middle 0, above it draw a tiny cone. Cylinders around it - far sides, closer make them one sheeted hyperbolas. 
\end{ex}

% Question: Which polynomials are contained in the ideal generated by their partials? ???? The quasi-homogeneous ones, i.e. homgeneous if the variables are given weights, i.e. x^2+y^5$ is not homogeneous but is quasi-homog. if given weights 5, 2. 


One may then ask which singularities deform to only finitely many others? More generally, which ones deform to a $k$-parameter family? (modality $k$). The answer to the first is Kleinian singularities. 


\begin{thm}[V.I. Arnold]
Let $f(x,y)=0$ be a germ of a plane $n$-dimensional hypersurface curve singularity with an isolated singularity at 0. Then $f$ is simple, i.e. deforms to only finitely many right equivalence classes of singularities if and only if $f$ is one of the following: $x^2+y^{n+1}+z_1^2+\cdots+z_{n-1}^2$ $n \geq 1$, $x^2y+y^{n-1}+z_1^2+\cdots+z_{n-1}^2$ $n \geq 4$, $x^3+y^4+z_1^2+\cdots+z_{n-1}^2$, $x^3+xy^3+z_1^2+\cdots+z_{n-1}^2$, $x^3+y^3+z_1^2+\cdots+z_{n-1}^2$, named $A_n$, $D_n$, $E_6$, $E_7$, $E_8$, respectively. In particular, $n=2$ gives the Kleinian singularities. 
\end{thm}





\subsection{Resolving Singularities}

Won't say the word scheme--that gives it power.

Resolving singularities of Kleinian singularities via blowups of points. Our goal will be to compute the dual graphs of the resolutions of the ADE surface singularities. 


\begin{dfn}[Singular Locus]
The singular locus of a hypersurface defined by $f(x_1,\ldots,x_n)=0$ is the vanishing set of the ideal $(f, \frac{\partial f}{\partial x}, \ldots, \dfrac{\partial f}{\partial x_n})$. It is a subset of $V=V(f)$. 
\end{dfn}


% Picture paper passing through itself. 

The goal of a resolution of singularities is to replace $V(f)$ by another algebraic set which is isomorphic to $V(f)$ `almost everywhere' and is nonsingular (has empty singular locus), almost everywhere here meaning everywhere except the singular locus. Let $\sing{V}$ be the singular locus of $V$ and $\smoo{V}$ be $V \setminus \sing{V}$. 


\begin{dfn}
A resolution of singularities of an algebraic set $V$ is a map $\pi: X \to V$ such that 
	\begin{itemize}
	\item $X$ is nonsingular
	\item $\pi$ is a bijection over $\pi\big|_{\pi^{-1}(\smoo{V})}: \pi^{-1}(\smoo{V}) \to \smoo{V}$ is $\cong$
	\item $\pi$ is proper, e.g. $X$ is a subset of some projective space over $V$. 
	\end{itemize}
\end{dfn}


\begin{thm}[Hironaka, 1964]
These exist for any algebraic set $V$ defined over a field of characteristic zero. 
\end{thm}


This is still open in characteristic $p$, dimension 4 or higher. The main tool was the blowup of a nonsingular subset of $V$ (for us a point). We replace the origin by a projective space $\cP^n$, the points of which correspond to the ``directions of approach'' to the origin. 


First, blowing up the origin in affine space. Take $\cA^n$ with coordinates $x_1,\ldots,x_n$, $\cP_{n-1}$ with coordinates $[u_1,\ldots,u_n]$. Consider the subset $X \subseteq \cA^n \times \cP^{n-1}$ defined by $X=\{ \left\{(x_1,\ldots,x_n); [u_1,\ldots,u_n] \right\} \colon x_iu_j=x_ju_i, i<j\}$


In the case $n=2$, $\cA^2_{x,y}$, $\cP^1_{u:v}$. $X=\{ ((x,y),[u:v]) \colon xv=yu \}$. There is a map $X \to \cA^2$ sending $((x,y), [u:v]) \mapsto (x,y)$ if $(x,y) \neq (0,0)$. What is $\pi^{-1}(x,y)$? $((2,-3),[2 \colon -3]) \mapsto (2,-3)$, exactly one such point. At the origin, $\pi^{-1}(0,0)= \{ ((0,0), [u:v])\} \cong \cP^1$. 


% Picture
% two planes parallel, loop around top plane with darkened point in middle. tiny x in top plane mapping to bottom single point. But the whole loop maps to single point. 


\begin{rem}
$X= \Proj(S[x_1t,\ldots,x_nt])$, where $S= \C[x_1,\ldots,x_n]$ is degree 0 with $\deg t=1$. Note that $S[x_1t,\ldots,x_nt] \subseteq S[t]$. Defining $u_k:= x_it$, the relations $x_iu_j=x_ju_i$ imply $x_i(x_jt)=x_j(x_it)$. 
\end{rem}


Observations about $X$. 

\begin{itemize}
\item We have a map $\pi: X \to \cA^n$ given by $(p,q) \mapsto p$.
\item The fiber of $\pi$ over the origin $(0,\ldots,0)$ is $\{ (x_1,\ldots,x_n); [u_1,\ldots,u_n] \colon x_1=x_2=\cdots=x_n=0\} \cong \cP^{n-1}$. 
\item The fiber over a point $(x_1,\ldots,x_n) \neq (0,0,\ldots,0)$ is the single point $((x_1,\ldots,x_n),[x_1:x_2:\cdots:x_n])$. Therefore, $\pi$ is a bijection away from the origin. 
\end{itemize}

Then $X$ looks like a copy of $\cA^n$ with the origin replaced by $\cP^{n-1}$. 

\begin{itemize}
\item $X$ is not just the union of $(\cA^n \setminus \{0\}) \cup \cP^{n-1}$, in fact, it is irreducible (as a variety, or a topological space in the Zariski topology), which we shall show soon (see the notes)

\item In the case $n=2$, 
	\[
	X= \{ ((x,y), [u:v]) \colon xv=yu\}.
	\]
Consider a line through the origin in $\cA^2$ and its preimage in $X$. 

% picture small plane, above it a surface. tick a point in the plane and draw a line through it across the entire plane (diagonally SE) called L', then get curve above it. Line through squizzle above, labeled \pi^{-1}(L'). 

$L=\{ (ta,tb) \colon t \in \C\}$. For $t \neq 0$, there is a unique point in $X$ lying over that point on the line. So if we let $L'= L \setminus \{(0,0)\}$, then $\pi^{-1}(L')$ is a punctured line in $X$. Its closure in $X$, $\overline{\pi^{-1}(L')}$ is $\overline{\{((ta,tb), [ta:tb]) \colon t \neq 0\}}= \{ ((ta,tb),[ta:tb])\}= \{((ta,tb), [a:b])\}$. The `new point' must be on the `exceptional fiber' $\cP^1$, the point $[a:b]$ on $\cP^1$. The correspondence sending the line $L=\{(ta,tb)\}$ to the point $[a:b]$ is a bijection between points of the exceptional fibre and lines through the origin. The same is true for all $n$. 
\end{itemize}



Blowing up the origin in a subset of $\cA^n$. 

Suppose $Y \subseteq \cA^n$ containing $(0,0,\ldots,0)$. Then the blowup of $Y$ at $(0,0,\ldots,0)$ is 
	\[
	\overline{Y}:= \overline{\pi^{-1}(Y \setminus \{(0,0,\ldots,0)\})},
	\]
where $\pi: X \to \cA^n$ is the blowup from before.


The blow up of a line through the origin is just a line in $X$, which meets the exceptional fiber at one point. 


FACT: $\tilde{Y}$ is defined as a subset of $\cA^n \times \cP^{n-1}$ by the equations defining $Y$, plus $x_iu_i=x_ju_i$ for $i \neq j$. 

We have $\pi^{-1}(Y)= \pi^{-1}(Y \setminus \{(0,0,\ldots,0)\}) \cup \pi^{-1}((0,0,\ldots,0))= \tilde{Y} \cup E$, where $E \cong \cP^{n-1}$ is the exceptional fiber. We call $\tilde{Y}$ the strict transform of $Y$ and $\pi^{-1}(Y)$ the total transform. 








% ??????????????????????????? WTF IS THE BELOW????????


\begin{ex}
Take $Y$ to be the union of the $x$ and $y$ axes in $\cA^2$ defined by $xy=0$. In fact, the total transform $\pi^{-1}(Y)$ is defined by the equations of $Y$ and $x_iu_j= x_ju_i$


% Give 3D image: vertical line E \cong P^1, two parallel axes labeled \pi^{-1}(x-axis) and another same but y-axis, rescp. 


 We know the preimage of the $x$-axis is a line in $x$ meeting $E$, the exceptional fiber, at the point $[1:0]$. Similarly, the preimage of the $y$-axis os a line meeting $E$, the exceptional fiber, at the point $[0:1]$. So $\tilde{Y}$ is the union of two skew lines. 

% Give plane, point in center, two lines forming X through it. surface above, squiggle in the surface above point. Two lines pass through squiggle intersect at an angle. Entire image labeled \pi^{-1}(Y).

Recall $\cP^{n-1}=\{ [u_1,\ldots,u_n] \colon u_i \text{ not all 0}/\sim$ is covered by affine chartsL $U_1= \{[u_1,\ldots,u_n] \colon u_i \neq 0\} \cong \cA^{n-1}$, since we can scale so that $u_i=1$, so $=\{[u_1,\ldots,1,u_i,\ldots, u_n]\}$

Continuing the example. Consider the chart where $u \neq 0$. On this chart, $\tilde{Y}$ is defined by $xy=0$ and $y=xv$. So it is defined by $x^2v=0$ ($y=vx$). This is the union of $\{x^2=0\}$ with $\{v=0\}$. If $x^2=0$, then $x=0$, so $y=xv=0$. So we have the point $\{(0,0),[1:v]\}$. 

Alternatively, consider subset of $X$ where $v=0$. Then in particular $u \neq 0$. 



So in this char $u=1$, we have $x=0: E$, $v=0:$ $((x,0), [1:0])$, $\pi^{-1}(x-axis)$. 

In the chart $v=1$, we get $y=0:$ the $v=1$ chart of $E$, $u=0: \pi^{-1}(y-axis)$. 
\end{ex}




%???????????????????????????????? WTF IS THE ABOVE?!




\begin{ex}
$Y: \{x^2+y^3=0\}$ cusp, $(A_2)$ singularity from previous table. The total transform $\pi^{-1}(Y)$ is defined by $x^2+y^3=0$, $xv=yu$ in $\cA^2 \times \cP^1$. Charts again: $u=1$: Here $y=xv$ and $x^2+(xv)^3=0$. Then $x^2(1+xv^3)=0$. This defines a union of two algebraic sets: $x^2=0$ and $1+xv^3=0$. 

There are then two cases: $x^2=0$. Then $y=0$ as well so then $\{((0,0), [1:v])\}$, an affine chart of $E \cong \cP^1$. 

In the case of $1+xv^3=0$......who knows but there are no singular points (partials vanish only at $x=v=0$, which is not on vanishing set of $1+xv^3$. For any $x \neq 0$, there are three distinct points, the three cube roots. 

In the other chart, $v=1$, $x^2+y^3=0$, $x=yu$. We substitute in: $y^2u^2+y^3=0$. Gives $y^2(u^2+y)=0$. 

$y^2$ is part of $E$ and $u^2+y$ is a parabola. 

% axes: vertical y, horizontal u, plot y= -x^2 parabola, deeply fill in x-axis. 

Following image from Hauser:

% circle at bottom, give 'duck mouth' vshape facing right. Give twisting band passing behind itself the bottom edge in same direction as bottom duck mouth edge. Then give dark line following inner edge of band. The top/bottom edge of the strip should be dotted. Can find picture already. 

We have resolved the singularity of the curve at the origin. But could do more, or ask for more. The total transform ($E \cup \tilde{Y}$) still has a singularity (see the intersection of line and parabola, meet at point of tangency). We could blow up again, and again,\dots until the total transform has `simple normal crossing' singularities, i.e. no tangency. So we would blow up the vanishing set of $y^2(u^2+y)$ in the $uy$-plane at the origin in the $(u,y)$-plane.
\end{ex}

Exercise: One more blowup is enough: we get $x$ crossing for total transform.

% Image: duck mouth y, <- sideways parabola meeting once @ vertex line E, parabola tilde y <- the picture like above with 3 lines in 3D, E vertical, E' horizontal top, tildetilde y bottom line. 

The composition takes $\tilde{\tilde{Y}}$ to $Y$ and collapses both $E$'s to the origin. The exceptional fiber of the whole operation is

% Two line cross E's, (E & E'). 


The number of times we have to blow up is measure of how singular the original was, i.e. its `multiplicity.' 

There are examples where blowing up increases the multiplicity. However, there are other numbers one can attach to these that go down when blowing up. Hironaka's proof is 17 nested inductions to show that blow-ups and normalization eventually resolve the singularities.  






% Two line cross E's, (E & E').  squiggle arrow to graph vertices E, E' attached to each other, labeled A_2. 







%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


Notice: $\pi^{-1}(Y)= \tilde{Y} \cup \pi^{-1}((0,0,\ldots,0))$ is cut out by $f_1= \cdots = f_n=0$ and the equations defining $X$. The exceptional fiber of the blowup of $Y$ is $\tilde{Y} \cap \pi^{-1}(0)= E$. Equivalently, it is $(\pi \big|_{\tilde{Y}})^{-1}((0,0,\ldots,0))$. 

% Give diagram
	%      E \hra				\pi^{-1}(0)
	% 	\subset				subset
	% tilde{Y} \hra				X
	% down surj arrow		down surj arrow
	%   Y \rha					\A^n
	

% Or fibre

E.g. $f= x^2+y^3$. 

Chart: $u=1$: $y=xv$ then $x^2+c^3v^3=0$, then $x^2(1+xv^3)=0$. $x^2=0$ defines the exceptional fiber of the blowup of $\cA^n$ $1+xv^3=0$ defines the strict transform in this chart (which is smooth curve in $xv$-plane) $x^2=0=1+xv^3$ defines the exceptional fiber of the blowup of $Y$. It's empty.

Chart $v=1$: $x=yu$ then $y^2u^2+y^3=0$, then $y^2(u^2+y)=0$. Now $y=0$ gives exceptional fiber $\cP^1$. $u^2+y= 0$ gives strict transform of $Y$ (the blowup of $Y$), which in this case is smooth (a parabola). The exceptional fiber is $y^2=u^2+y=0$ is the $u$-axis intersected the curve $-u^2$ so it is a single point---$(0,0)$. 



\begin{ex}
$f= x^2+y^2+z^2$, the cone. This is an $A_1$ singularity: $A_n: x^2+y^{n+1}+z^2$. First, we blowup $\cA^3$ at $(0,0,\ldots,0)$. 
	\[
	X= \{ ((x,y,z), [u:v:w]) \colon xv=yu, xw=zu, yw=zv \} \subseteq \cA^3 \times \cP^2.
	\]
Consider the chart $u=1$. Then $y= xv$, $z= xw$. We also have $yw=zv$. Then $f$ becomes $x^2+x^2v^2+x^2w^2=0$. $x^2(1+v^2+w^2)=0$. Now $x^2=0$ so $x=0$ but then $y=z=0$, this defines $\pi^{-1}(0)$. Now $1+v^2+w^2=0$ defines a cylinder in $xvw$-space. So the blowup of $Y$ is a cylinder. The exceptional fiber of this blowup is defined by $x^2= 1+v^2+w^2= s0$. The intersection of the cylinder with the $vw$-plane 

% Diagram: on left cylinder on the right a cone. THen an arrow from the cylinder to the cone. Have a red circle in the middle of the cylinder, i.e. x=0 and a red vertex pointon the cone. Takes circle to the vertex.
 By symmetry, $\tilde{Y}$ is smooth in all three charts, and the exceptional fiber of $\tilde{Y}  \to Y$ is a projective line $\cP^1$ (by theorems it's a projective rational curve). The dual graph of the resolution 

\end{ex}




\begin{ex}
All $A_n$ singularities at once: $x^2+y^{n+1}+z^2=0$, where $n \geq 2$. Start with the chart where $v=1$. 




$v=1$: $x=yu$, $z=yw$. Then $y^2u^2+y^{n+1} y^2w^2=0$. Then $y^2(u^2+y^{n-1}+w^2)=0$. The $y^2$ is the exceptional fiber. The strict fiber is given by $u^2+y^{n-1}+w^2=0$, which is sort of $A_{n-2}$. If $n=1$, (the previous example), then it's the cylinder, so smooth, and the exceptional fiber is a single $\P^1$. 

If $n=2$, $u^2+y+w^2=0$ is smooth (by Jacobian criterion). The exceptional fiber is $y^2=0=u^2+y+w^2$. The first says $y^2=0$ so $y=0$ then $u^2+w^2=0$ in $uw$-plane. Then $(u-iw)(u+iw)=0$ is a pair of crossing lines. 

% Give crossing lines image.

If $n \geq 3$, then the blowup  is an $A_{n-2}$ singularity in $yuw$-space. The exceptional fiber is again two lines. So now we just iterate blowing up the origin in $yuw$-space and continue. Each time the subscript of $A_{n-2}$ decreases down until we hit either of the cases above. So it depends only on the parity, i.e. last blowup is either of type $A_2$ or $A_1$. 

% n 			dual graph
% n=1			dot
% n=2 			two dots connected
% n=3 			three lines connected, lying flat 		on right, two finite lines not touching, one crossing both
% n=4 		four dots connected lie flat		E_0 line, E_0' line,E_1 and E_1' cross their line and then each other, rightarrow to two lines crossing rightarrow cone 	

For all $n$, the dual graph is the $A_n$ Coxeter-Dynkin diagram. 


% $u=1$: $y=xv$, $z=xw$. Then $x^2+x^{n+1}v^{n+1} x^2w^2=0$. 
\end{ex}



\begin{ex}
$D_4$: $x^3+x^3y+z^2=0$. The $v=1$ and $w=1$ charts are smooth (check!) So these are boring. Consider now

$u=1$: $y=xv$, $z=xw$. We then get $x^2(xv+xv^3+w^2)= 0$. $x^2$ is the exceptional fiber. Now $xv+xv^3+w^2$ has gradient $\nabla = \langle v+v^3, x+3xv^2, 2w \rangle$ so that $w=0$. There are, as it turns out, three singular points: $(0,0,0)$, $(0,i,0)$, $(0,-i,0)$. Observe $xv+xv^3+w^2= xv(v_i)(v-i)+w^2$ has $A_1$ singularities at the points $(xv+w^2 \sim x^2+v^2+w^2$). Blow up each of those and the result is smooth. 

The exceptional set of the first blowup is defined by $x^2= xv+xv^3+w^2=0$ in $xvw$=-space. $x=w=0$, the $v$-axis, i.e. a line $E_0$. Notice that the three $A_1$ singularities lie on the exceptional fiber. So when we blow them up and replace them by a $\cP^1$, which intsects $E_0$. 

% E_0 vertical line, three random lines going through it, labeled top to bottom, E_1, E_1', E_1''. 

The geometric picture is

% See blackboard image.

% Three upper half of cone spread out evenly, all attached at same vertex, i.e. like \lambda, but with cones. 
\end{ex}

% The example above probably has x,y swithced from previous notation


\begin{ex}
$D_n$: $x^2y+ y^{n-1}+z^2$ for $n \geq 5$. Blowing up the origin gives a $D_{n-2}$ with an exceptional fiber of two $\cP^1$'s. 
\end{ex}






\begin{ex}
$E_6$ $x^2+y^3+z^4=0$. This takes 4 blowups. 

Blowup 1, chart $w=1$: $x=zu$, $y=zv$. We then get $z^2u^2+z^3v^3+z^4= z^2(u^2+zv^3+z^2)$. We have exceptional fiber $z^2$. Notice that $u^2+zv^3+z^2= u^2+ (z+v^3/2)^2 - v^6/4$. A change of variables leads to $u^2+z'^2 - v'^6$, an $A_5$ singularity. The exceptional fiber defined by $z^2=u^2+zv^3+z^2=0$ first gives $z=0$ but then $u^2=0$ so that $v$ arbitrary is the line $z=u=0$ in $zuv$-space. 

You run out of letters fast. We reset notation. Consider $x^2+zy^3+z^2=0$. and line $z=x=0$. Call this $E_0$. 

Blowup 2, chart $v=1$: We get $y^2u^2+y^4w+y^2w^2= y^2(u^2+y^2w+w^2)$. Again, exceptional fiber is $y^2$ and again, complete square: $u^2+(w+y^2/2)^2 0 y^4/4$. an $A_3$ singularity. The exceptional fiber of the blowup is again a pair of lines. $u \pm iw=0$. call the lines $E_1^\pm$. 

Reset notation again. Consider $x^2+y^2z+z^2=0$. We get an $A_1$ singularity. Again, with two lines in the exceptional fiber. 

We have picture

% Blowup 1: E_0 line
% Blow up 2: E_0 vertical line, x lines crossing labeled E_1\pm, respectively.
% Blow up 3: Same as \#2 but with lines labeled E_2\pm and E_1\pm hit two diagonal lines at top (they are curvy)
% Blow up 4: E_0 vertical line, E_2^-, E_3, E_2^+ horizontal crossing. E_!^+ hits E_2^+ on left digonally and same for E_1^- on bottom left. 

Dual graph to this is 

% E_1^- --- E_2^- ---- E_0 ---- E_2^+  ---- E_1^+
%                                   |
% 				   E_3
Which is of course $E_6$. 

The cases of $E_7$ and $E_8$ work similarly. 
\end{ex}



% Non-example - Non-kleinian example
\begin{ex}
$T_{3,3,3}$ singularity: $x^3+y^3+z^3+xyz$. Blowup the origin and look at the $u=1$ chart: we have $y=xv$, $z= xw$. Then $x^3+xv^3+x^3w^3+x^3vw= 0$. Factoring out $x^3$, we have $x^3(1+v^3+w^3+vw)=0$. The strict transform is defined by $1+v^3+w^3+vw=0$ in $xvw$-space. Taking partials yields that this is singular at three lines: $(x,-1,1)$, $(x,\theta,\theta^2)$, $(x,\theta^2,\theta)$, where $x$ is arbitrary and $\theta$ is a cube root of unity. This is a surface with three lines of singularities, i.e. highly non-isolated singularities. Blowing up wont help you, at least blowing up at a point. One can however can blowup arbitrary subvarities. The thing to do is `normalize', i.e. take integral closure, to replace the non-embedded singularities by isolated ones. 
\end{ex}



\begin{thm}
The Kleinian surface singularities are the only surface singularities that can be resolved using only blow-ups at a point. 
\end{thm}


One can prove this using direct calculations. However, there is a uniform proof of this due to Artin-Verdier going via the reflective modules over the invariant ring $k[u,v]^G$ and using more Algebraic Geometry. 


Our next project is to understand the module theory of invariant rings $k[x_1,\ldots,x_n]^G$. 




%%%%%%%%%%%%%%%%%%
\section{Commutative Algebra of Invariant Rings}


We take a graded approach rather than the local approach. Our setup is $k$ is a field, $W$ a finite dimensional (dim. $d$) $k$-vector space, $G \subseteq \GL_n(W) \cong \GL_n(k)$ is a finite group with $|G| \in k^\times$, $S=k[W] \cong k[x_1,\ldots,x_d]$, and $R= S^G$ is the invariant ring. In particular, $R \subseteq S$ is a subalgebra. Invariant rings are `nicer' than your randomly chosen subring of polynomial rings. This is because of
	\begin{enumerate}[(i)]
	\item the Reynolds oeprator, $\rho: S \to R$ given by
		\[
		\rho(s)= \dfrac{1}{|G|} \sum_{g \in S} g_S
		\]
	is an $R$-linear split surjection, so $S \cong R \oplus \ker \rho$ as $R$-modules.
	\item Symmetric polynomials. 
	\end{enumerate}


\begin{thm}[Noether, 1928]
The ring $R$ is a noetherian integrally closed domain of Krull dimension $d= \dim_k W$. 
\end{thm}


\begin{rem}
None of these properties hold for arbitrary subrings of polynomial rings. 
\end{rem}

 We remind the reader of Krull dimension. Recall that the Krull dimension of a $k$-algebra $A$ is the maximal number of algebraically independent (over $k$) elements. This is equivalent to the transcendence degree of the quotient field $Q(A)$ over $k$. When $A$ is as above and $k= \C$, the Krull dimension is the topological dimension of the vanishing set corresponding to $A$; that is, if $A= k[y_1,\ldots,y_m]/(f_1,\ldots,f_r)$, then $\dim A= \dim V(f_1,\ldots,f_r) \subseteq \C^m$. 
 
 
 \begin{lem}
 The extension $R \hookrightarrow S$ is integral, i.e. every element of $S$ is a root of a monic polynomial with coefficients in $R$. 
 \end{lem}

\pf For $s \in S$, define $f_s(t):= \prod_{g \in G} (t-gs)$. Then $f_s(t)$ is monic in $t$ and has $s$ as a root since $t-s$ is a factor of $f_s(t)$. The action of $G$ permutes the factors so it fixes the coefficients, so $f_s(t) \in R[x]$. \qed \\


This already shows that $\dim R= \dim S=d$ since integral extensions satisfy Going-Up and Going-Down and thus preserve dimension. We know also (see Atiyah-MacDonal Ch. 5) if $A \hookrightarrow B$ is an integral extension of rings, and $B$ is finitely generated as an $A$-algebra, then $B$ is finitely generated as an $A$-module. It then follows that

\begin{cor}
$S$ is a finitely generated $R$-module of rank $|G|$.
\end{cor}

\pf It is enough to show that $S$ is a finitely generated $R$-algebra. But $S$ is generated over $k$ by $x_1,\ldots,x_d$ so that it is generated over $R$ by $x_1, \ldots, x_d$ also. For the rank, recall that the rank of a module $M$ over a domain $A$ is $\dim_{Q(A)} M \otimes_A Q(A)$. So we need to compute $\dim_{Q(R)}(S \otimes_R Q(R))$.  But $S \otimes_R Q(R)$ is just $Q(S)$ by integrality. Then any $s \in S$ satisfies an equation $s^p + r_1s^{p-1}+\cdots+r_{p-1}s+r_p=0$, where $r_i \in R$ and $r_p \neq 0$. Then $s(s^{p-1}+r_1s^{p-2}+\cdots+r_{p-1})= -r_p$. Then
	\[
	\dfrac{1}{s}= -\dfrac{1}{r_p} \left( r_1 s^{p-2} + \cdots + r_{p-1} \right).
	\]
If you invert everything in $R$, then you have effectively inverted everything in $s$ by the above. So we need $\dim_{Q(R)} Q(S)$. This a Galois field extension, $Q(S)^G= Q(R)$ so it has degree $|G|$. \qed \\


We now prove that $R$ is noetherian: \\

We know that $S$ is integral over $R$, so that each $x_i$ is integral over $R$. Let $f_1(t), \ldots, f_d(t)$ be monic polynomials with $f_i(x_i)=0$. Let $B \subseteq R$ be the $k$-subalgebra generated by all the coefficients of $f_1,\ldots,f_d$. Then $B$ is finitely generated as a $k$-algebra so that it is noetherian by the Hilbert Basis Theorem. $S$ is integral over $B$, and finitely generated as a $B$-algebra, so finitely generated as a $B$-module. Now $B$ is noetherian and $S$ is a finitely generated $B$-module, every $B$-submodule of $S$ is a finitely generated module. In particular, $R$ must be a finitely generated $B$-module and hence is a noetherian module. Ideals in $R$ are $B$-submodules of $R$ and hence satisfy the ascending chain condition. Hence, $R$ is noetherian. \qed \\



We now prove that $R$ is integrally closed in its quotient field (normal): \\


We know that $Q(S)^= Q(R)$. 


% Field diagram
% 		     Q(S)
%                /        \
% 		S	     \
% 		  \          Q(R)
% 	                R/		


If $x=a/b \in Q(R)$ is integral over $R$, then in particular $x \in Q(S)$ and is integral over $S$. Polynomial rings are integrally closed in their quotient field. So $x \in S$. Hence, $x \in S \cap Q(R)= S \cap Q(S)^G= S^G= R$. When is $R$ a UFD? Always? Never? In between? We know that $S \cong k[x_1,\ldots,x_d]$ is a UFD but $k[u,v]^{C_2}= k[u^2,uv,v^2] \cong k[a,b,c]/(ac-b^2)$ is not a UFD since $u^2 \cdot v^2= (uv)^2$. If we assume that $G$ has no nontrivial linear characters, i.e. no group homomorphisms $G \to k^\times$, then the invariant ring is a UFD. 

\pf Let $r \in R$, then $r \in S$, so we can factor $r= q_1^{a_1} \cdots q_m^{a_n}$, where each $q_i$ is irreducible in $S$ are pairwise non-associate. The $q_i$'s are not necessarily permuted by $G$, but the ideals $(q_1),\ldots,(q_m) \subseteq S$ are. Let $O_1,\ldots,O_e$ be the orbits of the ideals $(q_1),\ldots,(q_m)$ under this action and set
	\[
	Q_j = \prod_{(q_i) \in O_j} q_i^{a_i}
	\]
for $j=1,\ldots,e$. The ideal $(Q_j)$ is stable under the action of $G$, so in particular for any $g \in G$, $gQ_j \in (Q_j)$ so $gQ_j$ is a multiple of $Q_j$. For degree reasons, $gQ_j= \lambda_g Q_j$ for some $\lambda_g \in k^\times$. The function $\lambda: G \to k^\times$ given by $g \mapsto \lambda_g$ (we get one such function for each orbit) and it is a group homomorphism. By assumption, $\lambda$ must be trivial, i.e. $gQ_j= Q_j$ for every $g \in G$ and $j=1,\ldots,e$. Then $Q_j \in R$ for every $j$ and $r= Q_1Q_2 \cdots Q_e$ is a factorization in $R$. Each $Q_j$ is irreducible because it is a product over a single orbit. It is routine, although tedious, to check uniqueness. \qed \\


\begin{ex}
$R= S^G$ is a UFD in the following cases (this is not a complete list, just examples): if $G$ is a nonabelian simple group, e.g. $A_n$ for $n \geq 5$ note that $A_5$ is the $\cI \cong A_5$ group, then we see that the $E_8$ singularity defined by $x^2+y^3+z^5=0$ is a UFD. Or $G= [G,G]$, i.e. every element is a commutator or a product of commutators (in $k^\times$ they are forced to be abelian so go to 1), such groups are called perfect. OR $k= \Q$ and $G$ has odd order (so then does every element) and every image of every element must then be of odd order, which there are none. One can generalize this to $|k|= p^e$ and $\gcd(|G|,|k^\times|=q-1)$. 
\end{ex}


Having proved Noether's Theorem, our next goal is the Hochster-Eagon Theorem that $R= S^G$, i.e. invariant rings are Cohen-Macaulay. We work with graded rings (recall that $k[x_1,\ldots,x_n]= \bigoplus_p k[x_1,\ldots,x_n]_p$, the $p$th graded piece consisting of homogeneous polynomials of degree $p$ and our group actions preserve degree so $k[x_1,\ldots,x_n]^= \bigoplus_p k[x_1,\ldots,x_n]_p^G$. Let $A= \bigoplus_{i=1}^\infty A_i= A_0 \oplus A_1 \oplus \cdots$ be a graded ring with $A_0= k$ a field. Sometimes [Bruns-Herzog] such rings are called *local since they have a unique homogeneous maximal ideal $\fm= A_1 \oplus A_2 \oplus \cdots$. 


\begin{dfn}[Homogenous System of Parameters]
A homogeneous system of parameters for $A$ is a sequence of elements $a_1,\ldots,a_t$ such that $A$ is a finitely generated module over the (graded subring) $k[a_1,\ldots,a_t]$. 
\end{dfn}




































